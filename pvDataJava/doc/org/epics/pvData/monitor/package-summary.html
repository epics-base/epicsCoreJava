<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Mon Jun 21 14:41:31 EDT 2010 -->
<TITLE>
org.epics.pvData.monitor
</TITLE>

<META NAME="date" CONTENT="2010-06-21">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="org.epics.pvData.monitor";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/epics/pvData/misc/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/epics/pvData/monitor/test/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/epics/pvData/monitor/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package org.epics.pvData.monitor
</H2>
<h1 style="text-align: center">EPICS pvData: monitor<br />
package: org.epics.pvData.monitor<br />
2010.04.29
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/Monitor.html" title="interface in org.epics.pvData.monitor">Monitor</A></B></TD>
<TD>Interface for Monitor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorAlgorithm.html" title="interface in org.epics.pvData.monitor">MonitorAlgorithm</A></B></TD>
<TD>The algorithm for monitoring.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorAlgorithmCreate.html" title="interface in org.epics.pvData.monitor">MonitorAlgorithmCreate</A></B></TD>
<TD>An interface implemented by code that implements a monitor algorithm.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorElement.html" title="interface in org.epics.pvData.monitor">MonitorElement</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorQueue.html" title="interface in org.epics.pvData.monitor">MonitorQueue</A></B></TD>
<TD>A queue for monitors.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorRequester.html" title="interface in org.epics.pvData.monitor">MonitorRequester</A></B></TD>
<TD>Requester for ChannelMonitor.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/AlgorithmDeadbandFactory.html" title="class in org.epics.pvData.monitor">AlgorithmDeadbandFactory</A></B></TD>
<TD>Factory that implements alarm deadband.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/AlgorithmOnChangeFactory.html" title="class in org.epics.pvData.monitor">AlgorithmOnChangeFactory</A></B></TD>
<TD>Factory that implements alarm onChange</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorFactory.html" title="class in org.epics.pvData.monitor">MonitorFactory</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/epics/pvData/monitor/MonitorQueueFactory.html" title="class in org.epics.pvData.monitor">MonitorQueueFactory</A></B></TD>
<TD>Factory that creates a MonitorQueue.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package org.epics.pvData.monitor Description
</H2>

<P>
<h1 style="text-align: center">EPICS pvData: monitor<br />
package: org.epics.pvData.monitor<br />
2010.04.29</h1>
CONTENTS 

<div class="toc">
<ul>
  <li><a href="#Overview">Overview</a></li>
  <li><a href="#Standard">Standard Monitor Requests</a> 
    <ul>
      <li><a href="#Record">Record Options</a></li>
      <li><a href="#Field">Field Options</a></li>
      <li><a href="#Monitor">Monitor Request Options</a></li>
      <li><a href="#Record1">Record Deadband</a></li>
      <li><a href="#Examples">Examples</a></li>
    </ul>
  </li>
  <li><a href="#Implementi">Implementing New Monitor Algorithms</a></li>
  <li><a href="#Monitor1">Monitor Interfaces</a> 
    <ul>
      <li><a href="#Monitor2">Monitor</a></li>
      <li><a href="#MonitorEle">MonitorElement</a></li>
      <li><a href="#MonitorReq">MonitorRequester</a></li>
      <li><a href="#MonitorFac">MonitorFactory</a></li>
      <li><a href="#MonitorAlg">MonitorAlgorithm</a></li>
      <li><a href="#MonitorQue">MonitorQueue</a></li>
    </ul>
  </li>
</ul>
</div>
<hr />

<h2 style="text-align: center" id="Overview">Overview</h2>
<hr />

<p>This package provides the ability to monitor changes to an arbitrary
subset of the fields in a record. The next section describes how a client
specifies monitor options. The rest of this package description is of
interest to developers.</p>

<p>A client can monitor an arbitrary subset of the fields in a record
instance. Each field has an associated monitor algorithm which decides if
changes to that field should cause a monitor. The algorithms implemented by
this package are: onPut, onChange, and deadband. The set of algorithms is
extensible. Code that implements an algorithm must implement two interfaces
and register itself to MonitorFactory.</p>

<p>The iimplementation uses PVCopy and PVCopyMonitor which are implemented in
package org.epics.pvData.pvCopy. When PVCopyMonitor tells monitor that
changes have occurred, monitor applies the appropriate algorithm to each
changed field and if any algorithm says to raise a monitor a monitor is sent
to the client.</p>

<p>The basic interface for monitoring is interface Monitor, which has four
methods: start, stop, poll, and release. Code that implements the client side
for monitors has code like the following:</p>
<pre>    //somewhere the following request is issued
    monitor.start();
    //somewhere the following is done:
    while(true) {
       MonitorElement monitorElement = monitor.poll();
       if(monitorElement==null) {
          // no elements in the queue. Do something.
       } else {
          // got a monitor. Handle the element and then
          monitor.release(monitorElement);
       }
    }</pre>

<p>This package provides the following support for monitors:</p>
<ol>
  <li>How a client specifies monitor options<br />
  </li>
  <li>Implementing new monitoring algorithms for pvData.<br />
    Many algorithms can be implemented by extending AbstractLocalMonitor.</li>
  <li>Monitor Queues<br />
    This package provides a complete implementation of montor queues for
    pvData. </li>
</ol>

<p>Developers who need to understand or implement monitor algorithms will be
interested in this package. For example it is used by pvccess to implement
monitors. The interfaces can be implemented by other servers, for example the
javaIOC (org.epics.ioc.caV3) implements a version of interface Monitor that
links to a version 3 EPICS IOC.</p>

<p>This package implements support for the following monitor algorithms:</p>
<dl>
  <dt>onPut</dt>
    <dd>A monitor is issued whenever a put is issued to the field. This is
      the default unless the record defines deadbands for a field. An
      exception is the top level timeStamp which by default is made onChange
      and monitor will not be raised.</dd>
  <dt>onChange</dt>
    <dd>This provides two options: 1) A monitor is raised whenever a field
      changes value, and 2) A monitor will never be raised for the field.</dd>
  <dt>deadband</dt>
    <dd>The field must be a numeric scalar. Whenever the absolute or
      percentage value of the field changes by more than a deadband a monitor
      is issued. The record instance can also define deadbands.</dd>
  <dt>periodic</dt>
    <dd>The request structure must define a field named value and that field
      must be a numeric scalar. Whenever the absolute value of the field
      changes by more than a percentage deadband a monitor is issued.</dd>
</dl>

<p>The monitor queue implementation provided by AbstractMonitor provides
support for the following queue sizes.</p>
<dl>
  <dt>1</dt>
    <dd>No queue is kept but only modified data is sent to the client. The
      data may change multiple times between times that the client receivers
      data but for applications like display managers this is OK. If a field
      is updated multiple time before the client polls the overflow bit is
      set for the field.</dd>
  <dt>&gt;=2</dt>
    <dd>A MonitiorQueue is used. Since a monitor queue has a fixed size over
      runs can still occur but are less likely. The client receives notice of
      any overflows. </dd>
</dl>
<hr />

<h2 style="text-align: center" id="Standard">Standard Monitor Requests</h2>
<hr />

<p>This section describes that monitor support provided by project pvData.
This it is the support that will be provided by any server that supports a
pvData database. Two issues are discussed: record options and field
options.</p>

<h3 id="Record">Record Options</h3>

<p>The options that apply to an entire record are:</p>
<dl>
  <dt><span style="font-family: Courier">periodic</span></dt>
    <dd>A record can ask to be monitored periodically by specifying a
      periodic rate. A monitor will be issued no faster that the rate
      specified. A periodic monitor does not use a monitor queue. </dd>
  <dt><span style="font-family: Courier">queueSize</span></dt>
    <dd>Queue size can be specified to be &gt;=1. A size of 1 means no queue
      but just keep a single copy of the data. A size of 2 is the
    default.</dd>
</dl>

<h3 id="Field">Field Options</h3>

<p>The following options are supported for all fields:</p>
<dl>
  <dt><span style="font-family: Courier">shareData</span></dt>
    <dd>Has a value of true or false and specifies if the server just
      transfer data from the record keep a copy. This option can save memory
      for array fields. Note that it is implemented by PVCopy.</dd>
</dl>

<p>For each field the following monitor algorithms are supported:</p>
<dl>
  <dt><span style="font-family: Courier">onPut</span></dt>
    <dd>A monitor is issued when a put is issued to the field. This is the
      default if no algorithm is specified and the field is not the top level
      timeStamp.</dd>
  <dt><span style="font-family: Courier">onChange</span></dt>
    <dd>This has two features depending on the value of causeMonitor. If
      causeMomitor is true (the default) then a monitor is raised only if the
      value has changed since the last monitor. If causeMonitor is false then
      this field will never cause a monitor. An example is a top level
      timeStamp field. If a client monitors the top level timeStamp then
      unless the client requests causeMonitor to be false, if the only change
      is to the timeStamp field no monitior will be issued.</dd>
  <dt><span style="font-family: Courier">deadband</span></dt>
    <dd>This can only be specified for a numeric scalar field. Details
    follow:</dd>
</dl>

<h3 id="Monitor">Monitor Request Options</h3>

<p>The examples will use the syntax supported by calling:</p>
<pre>   PVStructure pvRequest = PVCopyFactory.createRequest(request);</pre>

<p>The request string has the following:</p>
<pre>   "record[option=value,...]field(fieldDef,...)"</pre>

<p>The standard record options are:</p>
<dl>
  <dt><span style="font-family: Courier">queueSize</span></dt>
    <dd>The value must be &gt;=1.</dd>
  <dt><span style="font-family: Courier">periodicRate</span></dt>
    <dd>The value is the maximum rate in seconds for monitors.</dd>
</dl>

<p>Each fieldDef is either of the form:</p>
<pre>    fullRecordName</pre>

<p>Where fullRecordName is the full name of the field in the record. The name
in the structure the client will get is the field name from the record. Or
fieldDef has the form:</p>
<pre>    fieldName{fieldDef,...}
    </pre>

<p>Each fieldDef is of the form:</p>
<pre>    fullFieldName[option=value,...]</pre>

<p>where <span style="font-family: Courier">fullFieldName</span> is of the
full field name of the record field and the options define the monitor
options.</p>

<p>Monitor options are identified via the following option.</p>
<pre>    algorithm=name
    </pre>

<p>where <span style="font-family: Courier">name</span> is the algorithm
name. For the algorithms implemented by pvData this is one of: <span
style="font-family: Courier">onPut, onChange, or deadband.</span> </p>

<p><span style="font-family: Courier">onPut</span> is the default so it does
not have to be specified.</p>

<p><span style="font-family: Courier">onChange</span> accepts one additional
option:</p>
<pre>    causeMonitor=value</pre>

<p>where value must be "true" or "false". The default is true.</p>

<p><span style="font-family: Courier">deadband</span> accepts the following
additional options:</p>
<pre>    deadband=deadbandValue
    type=typeValue
    isPercent=isPercentValue</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">deadbandValue</span></dt>
    <dd>The change in value (or percentage change) that causes a monitor. If
      not specified the deadband is taken from the record if the record
      defines it. If specified and the record also defines it the minimum
      value is taken. </dd>
  <dt><span style="font-family: Courier">typeValue</span></dt>
    <dd>Must be "display" or "archive". This says if the record deadband is
      taken from display or from archive. The default is display.</dd>
  <dt><span style="font-family: Courier">isPercentValue</span></dt>
    <dd>Must be true or false. The default is false. If true the deadband is
      a percentage change otherwise it is an absolute change.</dd>
</dl>

<h3 id="Record1">Record Deadband</h3>

<p>Any numeric scalar field in a record instance can optionally have an
associated deadband structure, which is defined as follows:</p>
<pre>&lt;structure structureName = "deadband"&gt;
    &lt;structure name = "display"&gt;
         &lt;scalar name = "isPercent" scalarType = "boolean"/&gt;
         &lt;!-- if true than percentage change. If false than absolute change --&gt;
         &lt;scalar name = "value" scalarType = "double"/&gt;
         &lt;!-- the deadband for display --&gt;
    &lt;/structure&gt;
    &lt;structure name = "archive"&gt;
         &lt;scalar name = "isPercent" scalarType = "boolean"/&gt;
         &lt;!-- if true than percentage change. If false than absolute change --&gt;
         &lt;scalar name = "value" scalarType = "double"/&gt;
         &lt;!-- the deadband for archive --&gt;
    &lt;/structure&gt;
&lt;/structure&gt;</pre>

<p>As an example:</p>
<pre>&lt;record name = "example"&gt;
    &lt;scalar name = "value" scalarType = "double"&gt;
    &lt;structure name = "deadband" extends = "deadband"&gt;
       &lt;structure name = "display"&gt;
          &lt;deadband&gt;.1&lt;/deadband&gt;
       &lt;/structure&gt;
       &lt;structure name = "archive"&gt;
          &lt;deadband&gt;.3&lt;/deadband&gt;
       &lt;/structure
    &lt;/structure&gt;
    &lt;!-- other stuff --&gt;
&lt;/record&gt;</pre>

<p>NOTE: If an algorithm is not defined by the user for a field and a
deadband is defined for the record than the algorithm is made to be deadband
and the display deadband is used as the deadband.</p>

<h3 id="Examples">Examples</h3>

<p>The following:</p>
<pre>    String request = "alarm,timeStamp,power.value";
    PVStructure pvRequest = PVCopyFactory.createRequest(request);</pre>

<p>Creates a pvRequest that monitors the alarm, timeStamp, and power.value
fields of a record. The client will receive a structure with the fields named
alarm,timeStamp, and value. Since the client has not specified any options
the defaults will be used. This means:</p>
<ul>
  <li>Any change in alarm will cause a monitor.</li>
  <li>A change in time stamp will NOT cause a monitor because a top level
    timeStamp is a special case.</li>
  <li>If power.value has an associated deadband structure than the display
    deadband will be used and the algorithm will be deadband. If power.value
    does not have an associated deadband than any put to power.value will
    cause a monitor.</li>
</ul>

<p>The following:</p>
<pre>    String request = "timeStamp[algorithm=onChange,causeMonitor=true]";
    PVStructure pvRequest = PVCopyFactory.createRequest(request);</pre>

<p>Will cause monitior whenever the timeStamp is changed. This is a way to be
notified whenever a javaIOC record is processed because this is normally the
only time the timeStamp is changed.</p>

<p>The following:</p>
<pre>    String request =
        "alarm,timeStamp,value{power.value[algortithm=deadband,isPercent=true,deadband=1.0}";
    PVStructure pvRequest = PVCopyFactory.createRequest(request);</pre>

<p>This requests a monitor whenever and alarm is raised or when the
power.value changes by at least 1 percent.</p>
<hr />

<h2 style="text-align: center" id="Implementi">Implementing New Monitor
Algorithms</h2>
<hr />

<p>This section discusses how to implement new monitor algorithms in addition
to the onPut, onChange, etc, implemented by this package.</p>

<p>The monitor algorithm must register by calling:</p>
<pre>    MonitorFactory.registerMonitorAlgorithmCreater(MonitorAlgorithmCreate monitorAlgorithmCreate)</pre>

<p>The implementation must implement interfaces <span
style="font-family: Courier">MonitorAlgorithmCreate</span> and <span
style="font-family: Courier">MonitorAlgorithm</span> which are described
below.</p>
<hr />

<h2 style="text-align: center" id="Monitor1">Monitor Interfaces</h2>
<hr />

<h3 id="Monitor2">Monitor</h3>

<p>This is the interface implemented by a factory that implements a
monitoring algorithm</p>
<pre>interface Monitor extends Destroyable {
    void start();
    void stop();
    MonitorElement poll();
    void release(MonitorElement monitorElement);
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">destroy</span></dt>
    <dd>destroy the monitor, i.e. release whatever resources are used by the
      implementation.</dd>
  <dt><span style="font-family: Courier">start</span></dt>
    <dd>Start monitoring. An initial monitor with all data modified must be
      generated.</dd>
  <dt><span style="font-family: Courier">stop</span></dt>
    <dd>Stop monitoring.</dd>
  <dt><span style="font-family: Courier">poll</span></dt>
    <dd>Called to get modified data. If no data has been modified since the
      last poll null is returned. </dd>
  <dt><span style="font-family: Courier">release</span></dt>
    <dd>release the element returned by the most recent poll request.</dd>
</dl>

<h3 id="MonitorEle">MonitorElement</h3>

<p>This is the interface returned by a call to poll.</p>
<pre>interface MonitorElement  {
    PVStructure getPVStructure();
    BitSet getChangedBitSet();
    BitSet getOverrunBitSet();
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">getPVStructure</span></dt>
    <dd>The data structure.</dd>
  <dt><span style="font-family: Courier">getChangedBitSet</span></dt>
    <dd>The bitSet showing which fields of the PVStructure have changed since
      the previous poll request.</dd>
  <dt><span style="font-family: Courier">getOverrunBitSet</span></dt>
    <dd>the bitSey which shows which fields have been modified more than once
      since the last poll request.</dd>
</dl>

<h3 id="MonitorReq">MonitorRequester</h3>

<p>This is the interface implemented by the code that request a monitor.</p>
<pre>interface MonitorRequester extends Requester {
    void monitorConnect(Monitor monitor, Structure structure);
    void monitorEvent(Monitor monitor);
    void unlisten();
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">monitorConnect</span></dt>
    <dd>The monitor has connected to a PVRecord.</dd>
  <dt><span style="font-family: Courier">monitorEvent</span></dt>
    <dd>A monitor event has occured. Monitor.poll is called to get the
    data.</dd>
  <dt><span style="font-family: Courier">unlisten</span></dt>
    <dd>The server has been told to disconnect from the record. The
      MonitorRequster can no longer issue any requests except destroy until
      monitorConnect is again called.</dd>
</dl>

<h3 id="MonitorFac">MonitorFactory</h3>

<p>This is a request to create a monitor.</p>
<pre>class MonitorFactory {
    static Monitor create(PVRecord pvRecord,
        MonitorRequester monitorRequester,PVStructure pvRequest);
    static void registerMonitorAlgorithmCreater(MonitorAlgorithmCreate monitorAlgorithmCreate)
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">create</span></dt>
    <dd>Create a monitor. The arguments are: 
      <dl>
        <dt><span style="font-family: Courier">pvRecord</span></dt>
          <dd>The record being monitored.</dd>
        <dt><span style="font-family: Courier">monitorRequester</span></dt>
          <dd>The monitor requester. This is the code to which monitot events
            will be delivered.</dd>
        <dt><span style="font-family: Courier">pvRequest</span></dt>
          <dd>The request options</dd>
      </dl>
    </dd>
  <dt><span
  style="font-family: Courier">registerMonitorAlgorithmCreater</span></dt>
    <dd>Called by code that implements a monitor algorithm.</dd>
</dl>

<h3 id="MonitorAlg">MonitorAlgorithm</h3>

<p>The following are implemented by code that implements a monitor
algorithm.</p>
<pre>interface MonitorAlgorithmCreate {
    String getAlgorithmName();
    MonitorAlgorithm create(
            PVRecord pvRecord,
            MonitorRequester monitorRequester,
            PVField fromPVRecord,
            PVStructure pvOptions);
}

interface MonitorAlgorithm  {
    String getAlgorithmName();
    boolean causeMonitor();
    void monitorIssued();
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">getAlgorithmName</span></dt>
    <dd>return the name of the algorithm.</dd>
  <dt><span style="font-family: Courier">causeMonitor</span></dt>
    <dd>Called to see if a change to this field should cause a monitor</dd>
  <dt><span style="font-family: Courier">monitorIssued</span></dt>
    <dd>Called after a monitor has been issued.</dd>
</dl>

<h3 id="MonitorQue">MonitorQueue</h3>

<p>This is the interface implemented by MonitorQueueFactory.</p>
<pre>interface MonitorQueue  {
    void clear();
    int getNumberFree();
    int capacity();
    MonitorElement getFree();
    void setUsed(MonitorElement monitorElement);
    MonitorElement getUsed();
    void releaseUsed(MonitorElement monitorElement);
}

class MonitorQueueFactory {
    static MonitorQueue create(MonitorElement[] monitorElements);
}</pre>

<p>where</p>
<dl>
  <dt><span style="font-family: Courier">clear</span></dt>
    <dd>Set all elements of the queue free.</dd>
  <dt><span style="font-family: Courier">getNumberFree</span></dt>
    <dd>Get the number of free queue elements.</dd>
  <dt><span style="font-family: Courier">capacity</span></dt>
    <dd>Get the number of queue elements.</dd>
  <dt><span style="font-family: Courier">getFree</span></dt>
    <dd>Get a free queue element. If no free elements null is returned.</dd>
  <dt><span style="font-family: Courier">setUsed</span></dt>
    <dd>Set the latest element returned by getFree to used.</dd>
  <dt><span style="font-family: Courier">getUsed</span></dt>
    <dd>Get the oldest used element. Null is returned when there are no more
      used elements.</dd>
  <dt><span style="font-family: Courier">releaseUsed</span></dt>
    <dd>release the element returned by the latest call to getUsed.</dd>
</dl>
<hr />
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/epics/pvData/misc/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/epics/pvData/monitor/test/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/epics/pvData/monitor/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
